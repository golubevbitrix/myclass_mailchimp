# MoyClassApp

MoyClassApp — это Flask-приложение для интеграции CRM-системы "Мой класс" с платформой рассылок [Mailchimp](https://mailchimp.com/). Приложение принимает вебхуки от CRM, получает информацию об учениках и их подписках, а затем обновляет или создаёт контакты в Mailchimp с назначением соответствующих тегов для дальнейшей сегментации аудитории.

## Оглавление

- [Основные возможности](#основные-возможности)
- [Установка и запуск](#установка-и-запуск)
- [Развертывание](#развертывание)
- [Лицензия](#лицензия)
- [Контакты](#контакты)

## Основные возможности

- **Интеграция с Moy Klass API:**  
  - Получение токена для доступа к API.
  - Получение информации об учениках и их подписках.
  
- **Интеграция с Mailchimp API:**  
  - Создание или обновление контактов в Mailchimp.
  - Назначение тегов для сегментации аудитории:
    - **Оффлайн-ученики:** Если ученик активен (статус "Учится"), назначается тег `WS`.
    - **Ученики, отказавшиеся от услуг:** Назначается тег `GoodBye Series`.
    - **Онлайн-ученики:**  
      Если ученик находится в статусе "Онлайн" и имеет один из нужных абонементов (по идентификатору) с условием `visitedCount == 0`, назначается тег `WSO`.  
      Если же онлайн-ученик не соответствует этому условию, то определяется групповой тег по значению класса (например, `Ekskluziv sa Marijom`, `Zajedno ka Znanju` или `Samostalno Putovanje`).

- **Логирование:**  
  Все события и ошибки записываются в файл `/var/www/myproject/app.log` с использованием ротации логов.

## Установка и запуск

1. **Клонирование репозитория:**  
   Выполните в терминале:
   ```bash
   git clone https://github.com/jurassicon/MoyClassApp.git
   cd MoyClassApp

## Контакты
[Черкасов Юрий](https://github.com/jurassicon)
